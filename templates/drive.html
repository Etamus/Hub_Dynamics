<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hub Spare Parts - Drive Online</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css">
  <link rel="stylesheet" href="/static/css/hub.css">
  <link rel="stylesheet" href="/static/css/shared.css">
  <link rel="stylesheet" href="/static/css/drive.css">
</head>
<body>
    <script>
      // Script de carregamento instantâneo do tema (para evitar flicker)
      (function() {
        try {
          const savedTheme = localStorage.getItem('hubTheme') || 'light';
          if (savedTheme === 'dark') {
            document.body.classList.add('theme-dark');
          } else if (savedTheme === 'light') {
            // Nenhuma classe necessária para o padrão 'light'
          } else {
            // Checa o tema do sistema
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
              document.body.classList.add('theme-dark');
            }
          }
        } catch (e) {
          // Ignora erros (ex: localStorage desativado)
        }
      })();
    </script>
    <script>
      (function() {
        try {
          const storedUser = localStorage.getItem('hubUsername') || '_default';
          const savedLanguage = localStorage.getItem(`hubLanguage_${storedUser}`) || localStorage.getItem('hubLanguage_default') || 'pt';
          document.documentElement.setAttribute('lang', savedLanguage === 'en' ? 'en' : 'pt-br');
          document.documentElement.dataset.hubLang = savedLanguage;
        } catch (error) {
          document.documentElement.setAttribute('lang', 'pt-br');
        }
      })();
    </script>

  <header class="internal-header">
    <a href="/" class="internal-logo" title="Hub Spare Parts">
      <img src="/static/icones/hub_logo.png" alt="Hub Spare Parts" class="logo-light">
      <img src="/static/icones/hub_logo_branco.png" alt="Hub Spare Parts" class="logo-dark">
      <div class="internal-logo-text">
        <span>Hub Spare Parts</span>
        <small>Drive Online</small>
      </div>
    </a>
    <div class="internal-header-tools">
      <a href="/" class="header-icon-btn back-button" title="Voltar ao Hub"><i class="fas fa-home"></i></a>
      <div class="access-container">
        <button id="access-btn" class="access-button" aria-label="Acesso" title="Acesso">
          <img id="profile-img" src="{{ profile_image or '/static/icones/default_profile.png' }}" alt="Perfil" class="profile-image-thumb">
        </button>
        <div class="access-dropdown" id="access-dropdown"></div>
      </div>
    </div>
  </header>

  <section class="internal-search-stack">
    <div class="tabs-wrapper">
      <div class="main-nav-tabs">
        {% if role == 'Executor' %}
        <a href="/automacao" class="nav-tab" data-page="automacao" title="Automações">
          <i class="fas fa-robot"></i>
          <span>Automações</span>
        </a>
        {% else %}
        <div class="nav-tab disabled" title="Acesso restrito a Executores">
          <i class="fas fa-robot"></i>
          <span>Automações</span>
        </div>
        {% endif %}

        <a href="/dashboards" class="nav-tab" data-page="dashboards" title="Dashboards">
          <i class="fas fa-chart-pie"></i>
          <span>Dashboards</span>
        </a>

        {% if role == 'Executor' or role == 'Analista' %}
        <a href="/drive" class="nav-tab active" data-page="drive" title="Drive Online">
          <i class="fas fa-hdd"></i>
          <span>Drive Online</span>
        </a>
        {% else %}
        <div class="nav-tab disabled" title="Faça login para acessar o Drive">
          <i class="fas fa-hdd"></i>
          <span>Drive Online</span>
        </div>
        {% endif %}
      </div>
    </div>

    <div class="page-search-container">
      <label for="drive-search-input" class="visually-hidden">Buscar no Drive</label>
      <i class="fas fa-search page-search-icon"></i>
      <input type="text" id="drive-search-input" class="page-search-input" placeholder="Buscar no Drive...">
      <div class="page-search-shortcut-hint" aria-hidden="true">
        <span class="shortcut-key">Ctrl</span>
        <span class="shortcut-key">K</span>
      </div>
    </div>
  </section>

  <div class="drive-container">
        <div class="drive-header">
          <span id="breadcrumbs-container">
            Caminho: <span id="breadcrumbs"></span>
        </span>
        </div>
        <div class="file-list-header">
            <span class="file-name-header">Nome</span>
            <span class="file-info-header mod-date-header">Modificado em</span>
            <span class="file-info-header file-size-header">Tamanho</span>
        </div>
        <ul class="file-list" id="file-list">
            </ul>
    </div>
    
  {% include 'partials/access_modals.html' %}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.js"></script>
  <script src="/static/js/shared.js" defer></script>
  <script src="/static/js/hub.js" defer></script>
  <script src="/static/js/drive.js" defer></script>
</body>
</html>