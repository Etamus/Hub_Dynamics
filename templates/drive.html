<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hub Spare Parts - Drive Online</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="/static/css/shared.css">
    <link rel="stylesheet" href="/static/css/drive.css">
</head>
<body>
    <script>
      // Script de carregamento instantâneo do tema (para evitar flicker)
      (function() {
        try {
          const savedTheme = localStorage.getItem('hubTheme') || 'light';
          if (savedTheme === 'dark') {
            document.body.classList.add('theme-dark');
          } else if (savedTheme === 'light') {
            // Nenhuma classe necessária para o padrão 'light'
          } else {
            // Checa o tema do sistema
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
              document.body.classList.add('theme-dark');
            }
          }
        } catch (e) {
          // Ignora erros (ex: localStorage desativado)
        }
      })();
    </script>
    <script>
      (function() {
        try {
          const storedUser = localStorage.getItem('hubUsername') || '_default';
          const savedLanguage = localStorage.getItem(`hubLanguage_${storedUser}`) || localStorage.getItem('hubLanguage_default') || 'pt';
          document.documentElement.setAttribute('lang', savedLanguage === 'en' ? 'en' : 'pt-br');
          document.documentElement.dataset.hubLang = savedLanguage;
        } catch (error) {
          document.documentElement.setAttribute('lang', 'pt-br');
        }
      })();
    </script>

    <div class="main-nav-tabs">
        
        {% if role == 'Executor' %}
        <a href="/automacao" class="nav-tab" data-page="automacao" title="Automações">
            <i class="fas fa-robot"></i>
            <span>Automações</span>
        </a>
        {% else %}
        <div class="nav-tab disabled" title="Acesso restrito a Executores">
            <i class="fas fa-robot"></i>
            <span>Automações</span>
        </div>
        {% endif %}

        <a href="/dashboards" class="nav-tab" data-page="dashboards" title="Dashboards">
            <i class="fas fa-chart-pie"></i>
            <span>Dashboards</span>
        </a>

        {% if role == 'Executor' or role == 'Analista' %}
        <a href="/drive" class="nav-tab" data-page="drive" title="Drive (F:) Online">
            <i class="fas fa-hdd"></i>
            <span>Drive</span>
        </a>
        {% else %}
        <div class="nav-tab disabled" title="Faça login para acessar o Drive">
            <i class="fas fa-hdd"></i>
            <span>Drive</span>
        </div>
        {% endif %}
        
    </div>

    <div class="page-header-separator"></div>
    
    <button id="theme-toggle-btn" class="theme-toggle-button" aria-label="Alternar Tema" title="Alternar Tema">
        <i class="fas fa-sun"></i> 
    </button>

    <button id="fullscreen-btn" class="fullscreen-button" title="Tela Cheia"><i class="fas fa-expand"></i></button>

    <a href="/" class="back-button" title="Voltar ao Hub"><i class="fas fa-home"></i></a>

    <div style="text-align: center; width: 100%; max-width: 900px;">
        <p class="subtitle"><i class="fas fa-info-circle"></i> <span>Navegue pelas pastas da rede</span></p>
    </div>
    <div class="drive-container">
        <div class="drive-header">
          <span id="breadcrumbs-container">
            Caminho: <span id="breadcrumbs"></span>
        </span>
        
        <div class="drive-search-container">
                <i class="fas fa-search drive-search-icon"></i>
                <input type="text" id="drive-search-input" placeholder="Buscar nesta pasta...">
            </div>
        </div>
        <div class="file-list-header">
            <span class="file-name-header">Nome</span>
            <span class="file-info-header mod-date-header">Modificado em</span>
            <span class="file-info-header file-size-header">Tamanho</span>
        </div>
        <ul class="file-list" id="file-list">
            </ul>
    </div>
    
  <script src="/static/js/shared.js" defer></script>
  <script src="/static/js/drive.js" defer></script>
</body>
</html>